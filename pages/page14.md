### 内存机制及堆栈

- 栈（stack） 栈stack为自动分配的内存空间，它由系统自动释放；
- 堆（heap） 堆heap是动态分配的内存，大小不定也不会自动释放。

> JavaScript 中的变量分为基本类型和引用类型。

- 基本类型（Undefined、Null、Boolean、Number和String）
基本类型在内存中占据空间小、大小固定 ，他们的值保存在栈(stack)空间，是按值来访问
- 引用类型 （对象、数组、函数）
引用类型占据空间大、大小不固定, 栈内存中存放地址指向堆(heap)内存中的对象。是按引用访问的

栈里存的就是基本类型
比如 ： var a = 1;

堆里存的是不确定内存占用大小的数据，存的引用类型
比如 ： var obj = {a:1}
但是 obj 在内存中的引用地址是固定的，所有 obj属性可以存在栈中，{a:1}存在堆中，它的指针指向obj的地址，之间是引用关系

看一个范例

```
var a = 1;
var b = a;
b = 2;
// a = 1;
--------------

var m = { a: 1, b: 2 }
var n = m;
n.a = 2;
// m.a = 2

```

有点奇怪是吗？
因为第一个示例改变的是栈中的相应变量的值，声明b以后，会在栈中新建一个变量指向b,a和b就不搭嘎了，a和b的所有操作都只是在栈中进行

第二个 m和n 只是属性名存在栈中，而他们的值都是指向同一个堆中的值，所以，当n改变了n.a的值，实际上是改变了在堆中的{a:1,b:2}中的 a 的值，而m的值也指向这个堆中的这个值，所以会同时改变


